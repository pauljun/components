webpackJsonp([5],{WOFa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("K1/g"),s=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"content element-doc"},[n("h1",[e._v("Vue 自定义皮肤")]),e._v(" "),n("h2",{attrs:{id:"element-ui-dong-tai-huan-fu"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#element-ui-dong-tai-huan-fu","aria-hidden":"true"}},[e._v("¶")]),e._v(" element-ui 动态换肤")]),e._v(" "),n("p",[e._v("1.安装 element-theme")]),e._v(" "),n("pre",[n("code",[e._v("npm i element-theme -D\n")])]),e._v(" "),n("p",[e._v("2.安装 theme-chalk")]),e._v(" "),n("pre",[n("code",[e._v("npm i element-theme-chalk -D\n")])]),e._v(" "),n("p",[e._v("3.初始化变量")]),e._v(" "),n("pre",[n("code",[e._v("et -i\n")])]),e._v(" "),n("p",[e._v("执行完命令后，可看到当前目录下生成了element-variables.scss文件, 也可以自己自定义文件名 et --init (file path)")]),e._v(" "),n("p",[e._v("4.修改变量")]),e._v(" "),n("p",[e._v("编辑 element-variabels.scss 文件, 例如修改主题色为橙色")]),e._v(" "),n("pre",[n("code",[e._v("$--color-primary: orange !default;\n")])]),e._v(" "),n("p",[e._v("5.编译")]),e._v(" "),n("p",[e._v("保存文件后，项目根目录下执行 et 编译主题")]),e._v(" "),n("pre",[n("code",[e._v("et\n")])]),e._v(" "),n("p",[e._v("执行完后，项目根目录下生成 theme 文件夹, 在src目录下新建 theme 文件夹, 进入theme文件夹，新建 orange 文件夹，将生成的css 文件全部拷贝到orange文件夹中")]),e._v(" "),n("p",[e._v("6.重复4,5步骤，建多套皮肤")]),e._v(" "),n("p",[e._v("7.引入")]),e._v(" "),n("p",[e._v("修改 main.js")]),e._v(" "),n("pre",[n("code",[e._v("...\nimport 'element-ui/lib/theme-chalk/index.css'; #删除此行\n//从缓存读取主题色配置信息\nlet theme = localStorage.theme;\nif (theme) {\n    theme = JSON.parse(theme);\n    //设置 css 变量 --Main\n    document.documentElement.style.setProperty('--Main', theme.color);\n    require(`./theme/${theme.value}/index.css`);\n} else {\n\t//默认设置为蓝色\n    document.documentElement.style.setProperty('--Main', '#409EFF');\n    require('./theme/blue/index.css');\n}\n...\n")])]),e._v(" "),n("p",[e._v("主题色变量使用")]),e._v(" "),n("pre",[n("code",[e._v("<style>\n.main{\n\tcolor: var(--Main);\n}\n</style>\n")])]),e._v(" "),n("p",[e._v("具体实现请参考")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://192.168.2.3/jingongxue/webcomponents/tree/master/element-theme"}},[n("a",{attrs:{href:"http://192.168.2.3/jingongxue/webcomponents/tree/master/element-theme"}},[e._v("http://192.168.2.3/jingongxue/webcomponents/tree/master/element-theme")])])])]),e._v(" "),n("p",[e._v("目前支持两种方式")]),e._v(" "),n("p",[e._v("1.自定义几种主题")]),e._v(" "),n("p",[e._v("2.颜色选择器，所有颜色均可使用")]),e._v(" "),n("h1",[e._v("React 换肤")]),e._v(" "),n("h2",{attrs:{id:"antd-huan-fu"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#antd-huan-fu","aria-hidden":"true"}},[e._v("¶")]),e._v(" antd 换肤")]),e._v(" "),n("p",[e._v("请参考")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://192.168.2.3/paul/web-groups/tree/master"}},[n("a",{attrs:{href:"http://192.168.2.3/paul/web-groups/tree/master"}},[e._v("http://192.168.2.3/paul/web-groups/tree/master")])])])]),e._v(" "),n("p",[e._v("1.安装 antd-theme-generator")]),e._v(" "),n("pre",[n("code",[e._v("npm i antd-theme-generator\n")])]),e._v(" "),n("p",[e._v("2.在 script 目录下新建color.js")]),e._v(" "),n("pre",[n("code",[e._v("const path = require('path');\nconst { generateTheme } = require('antd-theme-generator');\n\nconst options = {\n  antDir: path.join(__dirname, '../node_modules/antd'),\n  stylesDir: path.join(__dirname, '../src/assets/styles'),\n  varFile: path.join(__dirname, '../src/assets/styles/color.less'),\n  mainLessFile: path.join(__dirname, '../src/assets/styles/main.less'),\n  outputFilePath: path.join(__dirname, '../public/color.less'),\n  themeVariables: [\n    '@primary-color',\n    '@secondary-color',\n    '@text-color',\n    '@text-color-secondary',\n    '@heading-color',\n    '@layout-body-background',\n    '@btn-primary-bg',\n    '@layout-header-background'\n  ],\n}\n\ngenerateTheme(options).then(less => {\n  console.log('Theme generated successfully');\n})\n  .catch(error => {\n    console.log('Error', error);\n  });\n\n")])]),e._v(" "),n("p",[e._v("3.修改package.json")]),e._v(" "),n("pre",[n("code",[e._v('"scripts":{\n\t...\n\t"color": "node scripts/color.js",\n}\n')])]),e._v(" "),n("p",[e._v("4.添加主题色")]),e._v(" "),n("p",[e._v("在 src/assets/styles目录下新建 color.less 和 main.less")]),e._v(" "),n("p",[e._v("color.less")]),e._v(" "),n("pre",[n("code",[e._v('@import "~antd/lib/style/themes/default.less";\n@primary-color: #3662fc;\n@link-color: @primary-color;\n@btn-primary-bg: @primary-color;\n\n:root{\n    --Main: @primary-color;\n}\n')])]),e._v(" "),n("p",[e._v("5.编译")]),e._v(" "),n("pre",[n("code",[e._v("npm run color\n")])]),e._v(" "),n("p",[e._v("编译完成，在public目录下生成了color.less文件。")]),e._v(" "),n("p",[e._v("6.引入less")]),e._v(" "),n("p",[e._v("在 public/index.html 中引入less.min.js")]),e._v(" "),n("pre",[n("code",[e._v('<link rel="stylesheet/less" type="text/css" href="%PUBLIC_URL%/color.less" />\n<script>\nwindow.less = {\n    async: false,\n    env: \'production\'\n};\n<\/script>\n\n<script type="text/javascript" src="%PUBLIC_URL%/less.min.js"><\/script>\n')])]),e._v(" "),n("p",[e._v("7.项目启动后可以直接使用 window.less.modifyVars 就可以了")]),e._v(" "),n("pre",[n("code",[e._v("window.less.modifyVars({\n    '@primary-color': 'red',\n    '@link-color': 'red'\n}).then(() => {\n\tmesss.success('success to update theme')\n})\n.catch(error => {\n\tmessage.error('failed to update theme')\n})\n")])])])}],!1,null,null,null);t.default=s.exports}});